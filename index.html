<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Isometric 3D Neural Network Diagram</title>

    <script src="https://cdn.tailwindcss.com"></script>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Space+Mono&display=swap" rel="stylesheet">

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        mono: ['Space Mono', 'monospace'],
                    },
                    colors: {
                        border: 'hsl(var(--border))',
                        input: 'hsl(var(--input))',
                        ring: 'hsl(var(--ring))',
                        background: 'hsl(var(--background))',
                        foreground: 'hsl(var(--foreground))',
                        primary: {
                            DEFAULT: 'hsl(var(--primary))',
                            foreground: 'hsl(var(--primary-foreground))',
                        },
                        secondary: {
                            DEFAULT: 'hsl(var(--secondary))',
                            foreground: 'hsl(var(--secondary-foreground))',
                        },
                        destructive: {
                            DEFAULT: 'hsl(var(--destructive))',
                            foreground: 'hsl(var(--destructive-foreground))',
                        },
                        muted: {
                            DEFAULT: 'hsl(var(--muted))',
                            foreground: 'hsl(var(--muted-foreground))',
                        },
                        accent: {
                            DEFAULT: 'hsl(var(--accent))',
                            foreground: 'hsl(var(--accent-foreground))',
                        },
                        popover: {
                            DEFAULT: 'hsl(var(--popover))',
                            foreground: 'hsl(var(--popover-foreground))',
                        },
                        card: {
                            DEFAULT: 'hsl(var(--card))',
                            foreground: 'hsl(var(--card-foreground))',
                        },
                    },
                    borderRadius: {
                        lg: 'var(--radius)',
                        md: 'calc(var(--radius) - 2px)',
                        sm: 'calc(var(--radius) - 4px)',
                    },
                },
            },
        };
    </script>

    <link rel="stylesheet" href="style.css">
    
</head>
<body class="bg-background text-foreground font-sans antialiased">

    <div id="legend" class="legend">
        <h4>Layer Key</h4>
        </div>

    <button id="show-edit-panel-btn" class="absolute bottom-6 left-6 z-10 h-12 w-12 rounded-full shadow-lg bg-primary text-primary-foreground hover:bg-primary/90 flex items-center justify-center transition-colors" title="Edit Model">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 0 2l-.15.08a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.38a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1 0-2l.15-.08a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"></path>
            <circle cx="12" cy="12" r="3"></circle>
        </svg>
    </button>

    <div id="edit-panel-overlay" class="fixed inset-0 z-[110] bg-black/60 items-center justify-center p-4 hidden">
        <div class="border bg-card text-card-foreground rounded-lg shadow-lg w-full max-w-6xl max-h-[90vh] flex flex-col font-mono">
            
            <div class="p-6 pb-4 border-b">
                <h3 class="text-xl font-semibold">Edit Model</h3>
            </div>

            <div class="p-6 space-y-6 overflow-y-auto">
                
                <div class="space-y-4">
                    <h4 class="text-lg font-medium">General Settings</h4>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4">
                        <div class="flex flex-col space-y-2">
                            <label for="font-picker" class="text-sm font-medium">Font</label>
                            <select id="font-picker" class="h-10 w-full border border-input bg-background rounded-md px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2">
                                </select>
                        </div>
                        <div class="flex flex-col space-y-2">
                            <div class="flex justify-between items-center">
                                <label for="font-size" class="text-sm font-medium">Label Font Size</label>
                                <span class="text-sm text-muted-foreground"><span id="font-size-value">12</span>px</span>
                            </div>
                            <input type="range" id="font-size" name="font-size" min="8" max="24" step="1" value="12" class="w-full h-2 bg-muted rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:h-5 [&::-webkit-slider-thumb]:w-5 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-primary">
                        </div>
                        <div class="flex flex-col space-y-2">
                            <div class="flex justify-between items-center">
                                <label for="label-distance" class="text-sm font-medium">Label Distance</label>
                                <span id="label-distance-value" class="text-sm text-muted-foreground">3.0</span>
                            </div>
                            <input type="range" id="label-distance" name="label-distance" min="1" max="10" step="0.1" value="3.0" class="w-full h-2 bg-muted rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:h-5 [&::-webkit-slider-thumb]:w-5 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-primary">
                        </div>
                        <div class="flex flex-col space-y-2">
                            <div class="flex justify-between items-center">
                                <label for="cube-gap" class="text-sm font-medium">Cube Gap</label>
                                <span id="cube-gap-value" class="text-sm text-muted-foreground">2.0</span>
                            </div>
                            <input type="range" id="cube-gap" name="cube-gap" min="0" max="20" step="0.5" value="2.0" class="w-full h-2 bg-muted rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:h-5 [&::-webkit-slider-thumb]:w-5 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-primary">
                        </div>
                        <div class="flex flex-col space-y-2">
                            <div class="flex justify-between items-center">
                                <label for="block-opacity" class="text-sm font-medium">Block Opacity</label>
                                <span id="block-opacity-value" class="text-sm text-muted-foreground">0.85</span>
                            </div>
                            <input type="range" id="block-opacity" name="block-opacity" min="0" max="1" step="0.05" value="0.85" class="w-full h-2 bg-muted rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:h-5 [&::-webkit-slider-thumb]:w-5 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-primary">
                        </div>
                        
                        <!-- START: Added Multiplier Sliders -->
                        <div class="flex flex-col space-y-2">
                            <div class="flex justify-between items-center">
                                <label for="height-multiplier" class="text-sm font-medium">Height Multiplier (H)</label>
                                <span id="height-multiplier-value" class="text-sm text-muted-foreground">1.5</span>
                            </div>
                            <input type="range" id="height-multiplier" name="height-multiplier" min="0.1" max="5" step="0.1" value="1.5" class="w-full h-2 bg-muted rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:h-5 [&::-webkit-slider-thumb]:w-5 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-primary">
                        </div>
                        <div class="flex flex-col space-y-2">
                            <div class="flex justify-between items-center">
                                <label for="width-multiplier" class="text-sm font-medium">Width Multiplier (W)</label>
                                <span id="width-multiplier-value" class="text-sm text-muted-foreground">1.5</span>
                            </div>
                            <input type="range" id="width-multiplier" name="width-multiplier" min="0.1" max="5" step="0.1" value="1.5" class="w-full h-2 bg-muted rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:h-5 [&::-webkit-slider-thumb]:w-5 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-primary">
                        </div>
                        <div class="flex flex-col space-y-2">
                            <div class="flex justify-between items-center">
                                <label for="channel-multiplier" class="text-sm font-medium">Channel Multiplier (C)</label>
                                <span id="channel-multiplier-value" class="text-sm text-muted-foreground">1.5</span>
                            </div>
                            <input type="range" id="channel-multiplier" name="channel-multiplier" min="0.1" max="5" step="0.1" value="1.5" class="w-full h-2 bg-muted rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:h-5 [&::-webkit-slider-thumb]:w-5 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-primary">
                        </div>
                        <!-- END: Added Multiplier Sliders -->

                        <!-- START: Added Label Border Toggle -->
                        <div class="flex items-center justify-between col-span-1 md:col-span-2 pt-2">
                            <label for="label-borders" class="text-sm font-medium">Show Label Box</label>
                            <input type="checkbox" id="label-borders" name="label-borders" checked class="h-5 w-5 text-primary rounded border-input focus:ring-primary focus:ring-offset-2 cursor-pointer">
                        </div>
                        <!-- END: Added Label Border Toggle -->

                    </div>
                </div>

                <div class="space-y-4">
                    <h4 class="text-lg font-medium">Edit Legend Key</h4>
                    <div class="border rounded-lg">
                        <div class="flex p-3 bg-muted/50 border-b">
                            <span class="flex-[3] text-sm font-medium text-muted-foreground px-2">Type Name</span>
                            <span class="flex-[1] text-sm font-medium text-muted-foreground px-2">Color</span>
                            <span class="w-9 h-1 px-2"></span> </div>
                        <div id="legend-list" class="divide-y divide-border">
                            </div>
                    </div>
                    <button id="add-type-btn" class="h-10 px-4 py-2 bg-secondary text-secondary-foreground hover:bg-secondary/80 rounded-md text-sm font-medium transition-colors">Add Type</button>
                </div>

                <div class="space-y-4">
                    <h4 class="text-lg font-medium">Edit Layers</h4>
                    <div class="border rounded-lg">
                        <div class="flex p-3 bg-muted/50 border-b text-sm font-medium text-muted-foreground">
                            <span class="px-2" style="flex: 1;">Layer Name</span> 
                            <span class="px-2" style="width: 80px;">H</span>
                            <span class="px-2" style="width: 80px;">W</span>
                            <span class="px-2" style="width: 80px;">C</span>
                            <span class="px-2" style="width: 44px;">Color</span>
                            <span class="px-2" style="width: 36px;"></span> </div>
                        <div id="layer-list" class="divide-y divide-border">
                            </div>
                    </div>
                    <button id="add-layer-btn" class="h-10 px-4 py-2 bg-secondary text-secondary-foreground hover:bg-secondary/80 rounded-md text-sm font-medium transition-colors">Add Layer</button>
                </div>

            </div>

            <div class="p-6 pt-4 border-t flex justify-between items-center">
                <button id="close-panel-btn" class="h-10 px-4 py-2 bg-background border border-input hover:bg-accent hover:text-accent-foreground rounded-md text-sm font-medium transition-colors">Close</button>
                <button id="update-network-btn" class="h-10 px-4 py-2 bg-primary text-primary-foreground hover:bg-primary/90 rounded-md text-sm font-medium transition-colors">Update Visualization</button>
            </div>

        </div>
    </div>


    <script type="importmap">
        {
            "imports": {
                "three": "https://cdn.jsdelivr.net/npm/three@0.165.0/build/three.module.js",
                "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.165.0/examples/jsm/"
            }
        }
    </script>

    <script type="module" src="main.js"></script>

</body>
</html>
